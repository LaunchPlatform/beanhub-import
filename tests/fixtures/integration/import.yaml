# yaml-language-server: $schema=../../../beancount-import.schema.json

inputs:
  - match: "*.csv"
    config:
      # import path is relative to the location of the configuration file
      # so this will import the `AgrimasterCsvExtractor` class from the
      # file tests/fixtures/integration/importer/agrimaster_csv.py
      extractor: importer.agrimaster_csv:AgrimasterCsvExtractor
      default_txn:
        date: "{{ date }}"
        narration: "{{ desc }}"
        meta: "{{ meta }}"
        postings:
          - account: "{{ account }}"
            amount:
              number: "{{ amount }}"
              currency: "{{ currency | default('AUD', true) }}"

imports:
  - match:
      desc: "Subscription fee"
    actions:
      - file: "output.bean"
        txn:
          postings:
            - account: "Assets:Bank"
            - account: "Expenses:Subscription"
              amount:
                number: "{{ -amount }}"
                currency: "{{ currency | default('AUD', true) }}"

  - match:
      desc: ".*"
    actions:
      - file: "output.bean"
        txn:
          postings:
            - account: "Assets:Bank"
              amount:
                number: "{{ -amount }}"
                currency: "{{ currency | default('AUD', true) }}"
